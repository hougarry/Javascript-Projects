<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <title>Contact Form To Email Using Javascript</title>
    <!-- Using the correct script source -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Removed inline JS and added an ID to the form for reference -->
        <form id="contact-form">
            <h3>Contact with Me</h3>
            <span class="title">Name:</span><input type="text" id="sendername" placeholder="Your name" required>
            <span class="title">Email: hougarry@gmail.com</span><input type="text" id="to" placeholder="To (Email)" required>
            <span class="title">Subject:</span><input type="text" id="subject" placeholder="Your subject" required>
            <span class="title">Your Email:</span><input type="text" id="replyto" placeholder="Reply To (Input your Email)" required>
            <span class="title">Message</span><textarea id="message" cols="30" rows="10" placeholder="The message will send to my google email, I will reply as soon as possible" required></textarea>
            <button type="submit">Submit</button>
        </form>
    </div>
</body>
<!-- Keeping scripts at the end of body for better page load -->
<script>
    // Initialize emailjs outside of the sendMail function
    emailjs.init("yuCcGjmpcWOZcdfxJ"); // Use your actual public key
    
    document.getElementById('contact-form').addEventListener('submit', function(event) {
        event.preventDefault(); // Preventing default form submission
        sendMail();
    });

    function sendMail(){
        var params = {
            sendername: document.querySelector("#sendername").value,
            to: document.querySelector("#to").value,
            subject: document.querySelector("#subject").value,
            replyto: document.querySelector("#replyto").value,
            message: document.querySelector("#message").value,
        };

        var serviceID = "service_qloxods"; // Your Service ID
        var templateID = "template_zoke8au"; // Your Template ID

        emailjs.send(serviceID, templateID, params)
        .then( res => {
            alert("Email successfully sent!")
        })
        .catch(err => {
            console.error("Error sending email: ", err);
            alert("Failed to send email. Please try again later.");
        });
    }
</script>
</html>
